<div class="container">
  <span class="col-md-4">
    <div class="panel panel-default" id="panel-estop" ng-show="settings.workspace_show_estop">
      <div class="panel-heading">emergency stop</div>
      <div class="panel-body">
        <div class="distributed-box centered">
          <label for="emergency-stop" class="sr-only">emergency-stop</label>
          <button id="btn-emergency-stop" name="emergency-stop" class="btn btn-danger btn-estop" ng-click="emergencyStop()">
            <span class="glyphicon glyphicon-warning-sign"></span>
          </button>
        </div>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        jog controls
      </div>
      <div class="panel-body" id="jog-panel">
        <form class="form-inline" role="form" id="form-command-jog">
          <div class="distributed-box">
            <div>
              <table>
                <tr>
                  <td>
                    <button class="btn btn-default" id="btn-z-up"
                        ng-click="relativeMove('Z')" ng-disabled="!machineService.isConnected">
                      <span class="glyphicon glyphicon-arrow-up"></span>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <label>Z</label>
                  </td>
                </tr>
                <tr>
                  <td>
                    <button class="btn btn-default" id="btn-z-down"
                        ng-click="relativeMove('Z-')" ng-disabled="!machineService.isConnected">
                      <span class="glyphicon glyphicon-arrow-down"></span>
                    </button>
                  </td>
                </tr>
              </table>
            </div>
            <div>
              <table>
                <tr>
                  <td></td>
                  <td>
                    <button class="btn btn-default" id="btn-y-up"
                        ng-click="relativeMove('Y')" ng-disabled="!machineService.isConnected">
                      <span class="glyphicon glyphicon-chevron-up"></span>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <button class="btn btn-default" id="btn-x-down"
                        ng-click="relativeMove('X-')" ng-disabled="!machineService.isConnected">
                      <span class="glyphicon glyphicon-chevron-left"></span>
                    </button>
                  </td>
                  <td>
                    <label>X/Y</label>
                  </td>
                  <td>
                    <button class="btn btn-default" id="btn-x-up"
                        ng-click="relativeMove('X')" ng-disabled="!machineService.isConnected">
                      <span class="glyphicon glyphicon-chevron-right"></span>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td></td>
                  <td>
                    <button class="btn btn-default" id="btn-y-down"
                        ng-click="relativeMove('Y-')" ng-disabled="!machineService.isConnected">
                      <span class="glyphicon glyphicon-chevron-down"></span>
                    </button>
                  </td>
                </tr>
              </table>
            </div>
            <div>
              <table>
                <tr>
                  <td>
                    <button class="btn btn-default" id="btn-x-home"
                        ng-click="sendCommands(['G28 X0'])" ng-disabled="!machineService.isConnected">
                      <span class="glyphicon glyphicon-home"></span> X
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <button class="btn btn-default" id="btn-y-home"
                        ng-click="sendCommands(['G28 Y0'])" ng-disabled="!machineService.isConnected">
                      <span class="glyphicon glyphicon-home"></span> Y
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <button class="btn btn-default" id="btn-z-home"
                        ng-click="sendCommands(['G28 Z0'])" ng-disabled="!machineService.isConnected">
                      <span class="glyphicon glyphicon-home"></span> Z
                    </button>
                  </td>
                </tr>
              </table>
            </div>
          </div>

          <div class="form-group">
            <label for="stepsize">
              step size <small>({{getStepSize()}})</small>
            </label>
            <div class="input-group">
              <span class="input-group-btn">
                <button class="btn btn-default" id="btn-stepsize-down" type="button"
                    ng-click="incrementStepSize(-1)" ng-disabled="!machineService.isConnected">-</button>
              </span>
              <input type="range" name="stepsize" id="input-stepsize" min="-1" max="2" class="form-control"
                  ng-model="stepSize" ng-disabled="!machineService.isConnected">
              <span class="input-group-btn">
                <button class="btn btn-default" id="btn-stepsize-up" type="button"
                    ng-click="incrementStepSize(1)" ng-disabled="!machineService.isConnected">+</button>
              </span>
            </div>                
          </div>
        </form>
      </div>
    </div>

    <div class="panel panel-default" id="panel-spindle" ng-show="settings.workspace_show_spindle">
      <div class="panel-heading">spindle controls</div>
      <div class="panel-body">
        <div class="distributed-box centered">
          <button class="btn btn-default" id="btn-m3"
              ng-click="sendCommands(['M3'])" ng-disabled="!machineService.isConnected">CW</button>
          <button class="btn btn-default" id="btn-m4"
              ng-click="sendCommands(['M4'])" ng-disabled="!machineService.isConnected">CCW</button>
          <button class="btn btn-default" id="btn-m5"
              ng-click="sendCommands(['M5'])" ng-disabled="!machineService.isConnected">OFF</button>
        </div>
      </div>
    </div>
  </span>


  <span class="col-md-8">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="dropdown pull-right">
          <span ng-show="machineService.pendingAck">‚êï</span>
          <button class="btn dropdown-toggle" type="button" id="console-menu" data-toggle="dropdown">
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu" aria-labelledby="console-menu">
            <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="machineService.logs = []">clear log</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="machineService.commandQueue = []">clear command queue</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="machineService.pendingAck = false">stop waiting for 'ok'</a></li>
          </ul>
        </div>
        console
        <small id="lbl-enqueued-commands">
          ({{machineService.commandQueue.length}} enqueued commands)
        </small>
      </div>
      <div class="panel-body" id="console-container">
        <div id="console-log" scroll-glue>
          <div ng-repeat="l in machineService.logs track by $index"
              ng-class="{'is-ack': l.isAck, 'log-user-entry': !l.remoteSource, 'log-remote-entry': l.remoteSource}">{{l.msg}}</div>
        </div>
        <form class="form" role="form" ng-submit="sendManualCommand(manualCommand)">
          <div class="input-group">
            <input type="text" class="form-control" id="input-control-cmd"
                ng-model="manualCommand" ng-disabled="!machineService.isConnected">
            <div class="input-group-btn">
              <button type="submit" class="btn btn-default"
                  ng-disabled="!machineService.isConnected">send</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </span>
</div>
